<!DOCTYPE html>
<html lang="en">
    <%- include("./include/head.html") %>
    <body>
        <div id="wrap">
            <div class="about">
                <div class="about-section">Slide 1</div>
                <div class="about-section">Slide 2</div>
                <div class="about-section">Slide 3</div>
                <div class="scroll-area">
                    <div class="content">
                        <div>contents 1</div>
                        <div>contents 2</div>
                        <div>contents 3</div>
                        <div>contents 4</div>
                        <div>contents 1</div>
                        <div>contents 1</div>
                        <div>contents 2</div>
                        <div>contents 3</div>
                        <div>contents 4</div>
                        <div>contents 1</div>
                        <div>contents 1</div>
                        <div>contents 1</div>
                        <div>contents 1</div>
                        <div>contents 1</div>
                        <div>contents 2</div>
                        <div>contents 3</div>
                        <div>contents 4</div>
                        <div>contents 1</div>
                        <div>contents 1</div>
                        <div>contents 2</div>
                        <div>contents 3</div>
                        <div>contents 4</div>
                        <div>contents 1</div>
                        <div>contents 1</div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script>
        let currentSection = 0;
        const sections = document.querySelectorAll('.about-section, .scroll-area');
        const about = document.querySelector('.about');
        let isScrolling = false;

        function scrollToSection(index) {
            if (isScrolling) return;

            isScrolling = true;
            currentSection = index;

            // 화면 높이 가져오기
            const viewportHeight = window.innerHeight;
            const translateY = -currentSection * viewportHeight; // px로 변환

            // transform을 사용하여 섹션 이동
            about.style.transform = `translate3d(0, ${translateY}px, 0)`;

            setTimeout(() => {
                isScrolling = false;
            }, 1000); // 애니메이션 시간에 맞춰 조정
        }

        window.addEventListener('wheel', (event) => {
            const scrollArea = document.querySelector('.scroll-area');

            if (currentSection < sections.length - 1) {
                // 섹션 간 스크롤
                if (event.deltaY > 0) {
                    // 아래로 스크롤
                    scrollToSection(currentSection + 1);
                } else {
                    // 위로 스크롤
                    if (currentSection > 0) {
                        scrollToSection(currentSection - 1);
                    }
                }
            } else {
                // 마지막 섹션에서 일반 스크롤
                if (event.deltaY < 0 && scrollArea.scrollTop === 0) {
                    // scroll-area의 최상단에 도달했을 때
                    scrollToSection(currentSection - 1);
                } else if (event.deltaY > 0) {
                    // 아래로 스크롤
                    if (scrollArea.scrollTop + scrollArea.clientHeight >= scrollArea.scrollHeight) {
                        // scroll-area의 맨 아래에 도달했을 때
                        return; // 더 이상 스크롤할 수 없으면 아무것도 하지 않음
                    }
                }
            }
        });

        // 처음 페이지 로드 시
        window.addEventListener('load', () => {
            // 초기 상태 설정, 필요시 추가
        });
    </script>
</html>
